<!--
  <div class="container">
  @if(status != null){

  <div class="p-alert p-alert-danger" role="alert">
    {{ status!.error.message }} - {{ status!.message }}
  </div>
  }@else {

  <div class="p-col-12">
    <div class="p-d-flex p-jc-center my-3">
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">

   
        <div class="form-group">
          @if(operation=='EDIT') {
          <span class="p-inputgroup-addon">
            <i class="pi pi-id-card"></i>
          </span>
          <input pInputText formControlName="id" placeholder="ID" required readonly>
          }
        </div>

        <div class="form-group">
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon">
              <i class="pi pi-user"></i>
            </span>
            <span class="p-float-label">
              <input pInputText formControlName="username" required (blur)="lostFocus.username = true">
              <label htmlFor="username">Username</label>
            </span>
          </div>
          @if(lostFocus.username){

          @if(hasError('username', 'required')){
          <div class="p-error block">El username es requerido</div>
          }
          @if(hasError('username', 'pattern')){
          <div class="p-error block">El username debe ser alfanumérico</div>
          }
          @if(hasError('username', 'minlength')){
          <div class="p-error block">El username debe tener más de 3</div>
          }
          @if(hasError('username', 'maxlength')){
          <div class="p-error block">El username debe tener menos de 15 caracteres</div>
          }
          }


        </div>

        <div class="form-group">
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon">
              <i class="pi pi-user"></i>
            </span>
            <span class="p-float-label">
              <input pInputText formControlName="email" required (blur)="lostFocus.email = true">
              <label htmlFor="email">Email</label>
            </span>
          </div>
          @if(lostFocus.email){

          @if(hasError('email', 'required')){
          <div class="p-error block">El email es requerido</div>
          }
          @if(hasError('email', 'email')){
          <div class="p-error block">El email debe tener una arroba y un dominio </div>
          }

          }


        </div>


    
        <div class="form-group">
          <div class="p-inputgroup">
            <span class="p-inputgroup-addon">
              <i class="pi pi-tag"></i>
            </span>
            <span class="p-float-label">
              <input pInputText formControlName="role" required (blur)="lostFocus.role = true">
              <label htmlFor="role">Role</label>
            </span>
          </div>
          @if(lostFocus.role){
          @if(hasError('role', 'required')){
          <div class="p-error block">El rol es requerido</div>
          }

          }

        </div>


        <div class="btn">
          <button pButton type="button" label="Save Jugador" (click)="onSubmit()" [disabled]="!userForm.valid"></button>
        </div>
      </form>
    </div>
  </div>

  }



-->


<div class="container mb-5">
  <div class="container has-text-centered">

    <div class="box mt-5">
      @if (status != null){
      <div class="notification is-danger mt-3">
        {{ status!.error.message }} - {{ status!.message }}
      </div>
      }@else{
      <div class="columns is-centered mt-3">

        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
          <!-- Campo 'ID' -->
          @if(operation=='EDIT'){
          <div class="field">
            <label class="label  has-text-white">ID</label>
            <div class="control has-icons-left">
              <input class="input" formControlName="id" placeholder="ID" required readonly>
              <span class="icon is-left">
                <i class="fas fa-id-card"></i>
              </span>
            </div>
          </div>
          }
          <!-- Campo 'username' -->
          <div class="field">
            <label class="label  has-text-white">Username</label>
            <div class="control has-icons-left has-icons-right">
              <input class="input" formControlName="username" required (blur)="lostFocus.username = true">
              <span class="icon  is-left">
                <i class="fas fa-user"></i>
              </span>
            </div>
          </div>
          @if(lostFocus.username){

          @if(hasError('username', 'required')){
          <i class="fas fa-exclamation-triangle has-text-danger"></i>
          <div class="has-text-danger">El username es requerido</div>
          }
          @if(hasError('username', 'pattern')){
          <i class="fas fa-exclamation-triangle has-text-danger"></i>
          <div class="has-text-danger">El username debe ser alfanumérico</div>
          }
          @if(hasError('username', 'minlength')){
          <i class="fas fa-exclamation-triangle has-text-danger"></i>
          <div class="has-text-danger">El username debe tener más de 3</div>
          }
          @if(hasError('username', 'maxlength')){
          <i class="fas fa-exclamation-triangle has-text-danger"></i>
          <div class="has-text-danger">El username debe tener menos de 15 caracteres</div>
          }
          }


          <!-- Campo 'email' -->
          <div class="field">
            <label class="label has-text-white">Email</label>
            <div class="control has-icons-left has-icons-right">
              <input class="input" formControlName="email" required (blur)="lostFocus.email = true">
              <span class="icon is-left">
                <i class="fas fa-envelope"></i>
              </span>
            </div>
          </div>

          @if(lostFocus.email){

          @if(hasError('email', 'required')){
          <i class="fas fa-exclamation-triangle has-text-danger"></i>
          <div class="has-text-danger">El email es requerido</div>
          }
          @if(hasError('email', 'email')){
          <i class="fas fa-exclamation-triangle has-text-danger"></i>
          <div class="has-text-danger">El email debe tener una arroba y un dominio </div>
          }

          }
          <!-- Campo 'rol' -->
          <div class="field has-text-centered" (mouseleave)="checkRoleError()" tabindex="0">
            <label class="label has-text-white">Rol</label>
            <div class="control">
              <label class="radio">
                <input type="radio" formControlName="role" [value]="true" [(ngModel)]="selectedRole">
                Admin
              </label>
              <label class="radio">
                <input type="radio" formControlName="role" [value]="false" [(ngModel)]="selectedRole">
                User
              </label>
            </div>
            @if(userForm.get('role')?.errors && (userForm.get('role')?.touched || showRoleError)){
              <i class="fas fa-exclamation-triangle has-text-danger"></i>
              <div class="has-text-danger">Debe seleccionar un rol</div>
            }
          </div>









          <div class="field m-3">
            <button class="button is-link" type="button" (click)="onSubmit()" [disabled]="!userForm.valid">
              Save Jugador
            </button>
          </div>
        </form>
      </div>

      }
    </div>
  </div>